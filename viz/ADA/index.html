<!DOCTYPE HTML>
<!--
	Dopetrope by HTML5 UP
	html5up.net | @n33co
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Activity Distribution Analyzer</title>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<meta name="description" content="" />
		<meta name="keywords" content="" />
		<!--[if lte IE 8]><script src="css/ie/html5shiv.js"></script><![endif]-->
		<script src="js/jquery.min.js"></script>
		<script src="js/jquery.dropotron.min.js"></script>
		<script src="js/skel.min.js"></script>
		<script src="js/skel-layers.min.js"></script>
		<script src="js/init.js"></script>
		<script src="http://d3js.org/d3.v3.min.js"></script>
		<noscript>
			<link rel="stylesheet" href="css/skel.css" />
			<link rel="stylesheet" href="css/style.css" />
			<link rel="stylesheet" href="css/style-desktop.css" />
		</noscript>
		<!--[if lte IE 8]><link rel="stylesheet" href="css/ie/v8.css" /><![endif]-->
		<style>
		
		.node {
		  cursor: pointer;
		}
		
		.node circle {
		  fill: #fff;
		  stroke: steelblue;
		  stroke-width: 1.5px;
		}
		
		.node text {
		  font: 10px sans-serif;
		}
		
		.link {
		  fill: none;
		  /*stroke: steelblue;*/
		  opacity: 0.3;
		  /*stroke-width: 1.5px;*/
		}
		
		#levels{
		margin-left: 120px;
			
		}
		
		</style>
	</head>
	<body class="homepage">

		<!-- Header -->
			<div id="header-wrapper">
				<div id="header">
					
					<!-- Logo -->
						<h1><a href="index.html">Activity Distribution Analyzer</a></h1>
					
					<!-- Nav -->
						<nav id="nav">
							<ul>
								<li class="current"><a href="index.html">Home</a></li>
								<li><a href="taxonomy.html">Tableau Taxonomy</a></li>
								<li><a href="left-sidebar.html">Report</a></li>
								<li><a href="no-sidebar.html">About</a></li>
							</ul>
						</nav>

					<!-- Banner -->
<!--						<section id="banner">
							<header>
								<h2>Howdy. This is Dopetrope.</h2>
								<p>A responsive template by HTML5 UP</p>
							</header>
						</section>-->

					<!-- Intro -->
						<section id="intro" class="container">
							<div class="row">
							
							
								<!--<div class="4u">
									<section class="first">
										<i class="icon featured fa-cog"></i>
										<header>
											<h2>Ipsum consequat</h2>
										</header>
										<p>Nisl amet dolor sit ipsum veroeros sed blandit consequat veroeros et magna tempus.</p>
									</section>
								</div>
								<div class="4u">
									<section class="middle">
										<i class="icon featured alt fa-flash"></i>
										<header>
											<h2>Magna etiam dolor</h2>
										</header>
										<p>Nisl amet dolor sit ipsum veroeros sed blandit consequat veroeros et magna tempus.</p>
									</section>
								</div>
								<div class="4u">
									<section class="last">
										<i class="icon featured alt2 fa-star"></i>
										<header>
											<h2>Tempus adipiscing</h2>
										</header>
										<p>Nisl amet dolor sit ipsum veroeros sed blandit consequat veroeros et magna tempus.</p>
									</section>
								</div>-->
							</div>
<!--							<footer>
								<ul class="actions">
									<li><a href="#" class="button big">Get Started</a></li>
									<li><a href="#" class="button alt big">Learn More</a></li>
								</ul>
							</footer>-->
						</section>
		
				</div>
			</div>

		<!-- Main -->
			<div id="main-wrapper">
				<div class="container">
					
					<div class="row">
					<div class="12u">
					<select class="dropdown" id='levels'>
					  <option value=1>Level 1</option>
					  <option value=2>Level 2</option>
					  <option value=3>Level 3</option>
					</select>
					<select class="dropdown large" id='assignment'>
					<option value="ass1-user1-activities">Ass1: user1</option> 
					<option value="ass1-user2-1-activities">Ass1: user2 1</option> 
					<option value="ass1-user2-2-activities">Ass1: user2 2</option> 
					<option value="ass1-user3-activities">Ass1: user3 </option> 
					<option value="ass1-user4-activities">Ass1: user4</option> 
					<option value="ass1-user5-activities">Ass1: user5</option> 
					<option value="ass1-user6-activities">Ass1: user6</option> 
					<option value="ass1-user7-activities">Ass1: user7</option> 
					<option value="ass1-user9-activities">Ass1: user9</option> 
					<option value="ass1-user8-activities">Ass1: user8</option> 
					<option value="ass1-user10-activities">Ass1: user10</option> 
					<option value="ass1-user11-activities">Ass1: user11</option> 
					<option value="ass2-user1-user2-activities">Ass2: user1</option> 
					<option value="ass2-user3-user8-activities">Ass2: user3</option> 
					<option value="ass2-user4-user13-activities">Ass2: user4-user13</option>
					<!--<option value="ass2-user12-user10-activities">Ass2: user12-user10</option> -->
					<option value="ass2-user8-user3-activities">Ass2: user8-user3</option> 
					<option value="ass2-user11-user9-activities">Ass2: Teak-user9</option> 
					<option value="ass3-user2-user1-activities">Ass3: user2-user1</option> 
					<option value="ass3-user9-user11-activities">Ass3: user9-user11</option> 
					<option value="ass3-user8-user3-activities">Ass3: user8-user3</option> 
					<option value="ass3-user10-user12-activities">Ass3: user10-user12</option> 
					<option value="ass3-user13-user4-activities">Ass3: user13-user4</option></select>
					<button class="alt button big" type="button" onclick="reloadData()">Load</button>
					<button class="alt button big" type="button" onclick="collapseAll()">Collapse All</button>
					<button class="alt button big" type="button" onclick="expandAll()">Expand All</button>
					<div id="legend"></div>
					<div id="viz"></div>
					</div> <!--end 12u-->
					<script>
					
					var margin = {top: 20, right: 120, bottom: 20, left: 120},
					    width = 1060 - margin.right - margin.left,
					    height = 1200 - margin.top - margin.bottom;
					    
					var i = 0,
					    duration = 750,
					    root;
					
					var tree = d3.layout.tree()
					    .size([height, width]);
					
					var edge_weight = d3.scale.linear()
										.domain([0, 100])
					                    .range([0, 100]);
					
					var diagonal = d3.svg.diagonal()
					    .projection(function(d) { return [d.y, d.x]; });
					
					// Define 'div' for tooltips
					var div = d3.select("div#legend")
						.append("div")  // declare the tooltip div 
						.attr("class", "tooltip")              // apply the 'tooltip' class
						.style("opacity", 0);                  // set the opacity to nil
					
					var svg = d3.select("div#viz").append("svg")
					    .attr("width", width + margin.right + margin.left)
					    .attr("height", height + margin.top + margin.bottom)
					  .append("g")
					    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
					
					d3.json("files/ass1-user1-activities-level-1.json", function(error, flare) {
					  edge_weight.domain([0,flare.size]);
					  root = flare;
					  root.x0 = height / 2;
					  root.y0 = 0;
					  
					  root.children.forEach(collapse);
					  update(root);
					});
					
					d3.select(self.frameElement).style("height", "800px");
					
					function update(source) {
					
					  // Compute the new tree layout.
					  var nodes = tree.nodes(root).reverse(),
					      links = tree.links(nodes);
					
					  // Normalize for fixed-depth.
					  nodes.forEach(function(d) { d.y = d.depth * 180; });
					
					  // Update the nodes…
					  var node = svg.selectAll("g.node")
					      .data(nodes, function(d) { return d.id || (d.id = ++i); });
					
					  // Enter any new nodes at the parent's previous position.
					  var nodeEnter = node.enter().append("g")
					      .attr("class", "node")
					      .attr("transform", function(d) { return "translate(" + source.y0 + "," + source.x0 + ")"; })
					      .on("click", click)
					      .on("mouseover", function(d) {		
					                  div.transition()
					      				.duration(500)	
					      				.style("opacity", 0);
					      				
					      			div.transition()
					      				.duration(200)	
					      				.style("opacity", .9);
					      				
					      			div.html(
					      				'<a class="button"  href= "./taxonomy.html?node='+d.name[0]+'">' + // The first <a> tag
					      				'Legend For: '+d.name[0]+
					      				"</a>"                          // closing </a> tag
					      				)	 
					      				.style("left", (d3.event.pageX) + "px")			 
					      				.style("top", (d3.event.pageY - 28) + "px");
					      			});
					
					  nodeEnter.append("circle")
					      .attr("r", 1e-6)
					      .style("fill", function(d) { return d._children ? "lightsteelblue" : "#fff"; });
					
					  nodeEnter.append("text")
					      .attr("x", function(d) { return d.children || d._children ? -10 : 10; })
					      .attr("dy", ".35em")
					      .attr("text-anchor", function(d) { return d.children || d._children ? "end" : "start"; })
					      .text(function(d) { return d.key; })
					      .style("fill-opacity", 1e-6);
					
					  // Transition nodes to their new position.
					  var nodeUpdate = node.transition()
					      .duration(duration)
					      .attr("transform", function(d) { return "translate(" + d.y + "," + d.x + ")"; });
					
					  nodeUpdate.select("circle")
					      .attr("r", function(d){ return edge_weight(d.size/2);})
					      .style("fill", function(d) { 
					      return d._children ? "lightsteelblue" : "#fff"; });
					
					  nodeUpdate.select("text")
					      .style("fill-opacity", 1);
					
					  // Transition exiting nodes to the parent's new position.
					  var nodeExit = node.exit().transition()
					      .duration(duration)
					      .attr("transform", function(d) { return "translate(" + source.y + "," + source.x + ")"; })
					      .remove();
					
					  nodeExit.select("circle")
					      .attr("r", 1e-6);
					
					  nodeExit.select("text")
					      .style("fill-opacity", 1e-6);
					
					  // Update the links…
					  var link = svg.selectAll("path.link")
					      .data(links, function(d) { return d.target.id; });
					
					  // Enter any new links at the parent's previous position.
					  link.enter().insert("path", "g")
					      .attr("class", "link")
					      .attr("stroke-width", function(d){
					      	return 1;
					      })
					      .attr("d", function(d) {
					        var o = {x: source.x0, y: source.y0};
					        return diagonal({source: o, target: o});
					      })
					      .attr("stroke", function(d){ 
					      	return linkColor(d.target.colorCode);});
					
					  // Transition links to their new position.
					  link.transition()
					      .duration(duration)
					      .attr("d", function(d){
					      /* calculating the top shift */
					      var source = {x: d.source.x - edge_weight(calculateLinkSourcePosition(d)), y: d.source.y};
					      var target = {x: d.target.x, y: d.target.y};
					      return diagonal({source: source, target: target});
					      })
					      .attr("stroke-width", function(d){
					      	return edge_weight(d.target.size);
					      });
					
					  // Transition exiting nodes to the parent's new position.
					  link.exit().transition()
					      .duration(duration)
					      .attr("d", function(d) {
					        var o = {x: source.x, y: source.y};
					        return diagonal({source: o, target: o});
					      })
					      .remove();
					
					  // Stash the old positions for transition.
					  nodes.forEach(function(d) {
					    d.x0 = d.x;
					    d.y0 = d.y;
					  });
					}
					
					function calculateLinkSourcePosition(link) {
						targetID = link.target.id;
						var childrenNumber = link.source.children.length;
						var widthAbove = 0;
						for (var i = 0; i < childrenNumber; i++)
						{
							if (link.source.children[i].id == targetID)
							{
								// we are done
								widthAbove = widthAbove + link.source.children[i].size/2;
								break;
							}else {
								// keep adding
								widthAbove = widthAbove + link.source.children[i].size
							}
						}
						return link.source.size/2 - widthAbove;
					}
					
					// Toggle children on click.
					function click(d) {
					  if (d.children) {
					    d._children = d.children;
					    d.children = null;
					  } else {
					    d.children = d._children;
					    d._children = null;
					  }
					  update(d);
					}
					
					function collapse(d) {
					  if (d.children) {
					    d._children = d.children;
					    d._children.forEach(collapse);
					    d.children = null;
					  }
					}
					
					function collapseAll() {
						root.children.forEach(collapse);
						update(root);
					}
					
					function expand(d) {
						if (d._children) {
							d.children = d._children;
							d._children = null;
						}
						if (d.children) {
							d.children.forEach(expand);
						}
						
					}
					
					function expandAll() {
						root.children.forEach(expand);
						update(root);
					}
					
					function reloadData(){
						var levels = document.getElementById("levels");
						var level_val = levels.options[levels.selectedIndex].value;
						
						var ass_element = document.getElementById("assignment");
						var ass_val = ass_element.options[ass_element.selectedIndex].value;
						
						var file_name = 'files/'+ass_val+'-level-'+level_val+'.json';
					//	ass1-anna-activities-level-1.json
					//	console.log(file_name);
					//	console.log(document.getElementById("assignment").selectedIndex);
					
						d3.json(file_name, function(error, flare) {
						edge_weight.domain([0,flare.size]);
						  root = flare;
						  root.x0 = height / 2;
						  root.y0 = 0;
							
						  root.children.forEach(collapse);
						  update(root);
						});
						
					}
					
					function linkColor(linkCode) {
						switch (linkCode)
						{
						  case 'Exploration Actions': 
						  	return '#0000FF';//blue
						    break;
						  case 'Task Actions':
						  	return '#FF7F00';//orange
						  	break;
						  case 'App Actions': 
							return '#FF0000';//red
							break;
						  case 'Insight Actions':
							return '#7F007F';//purple
							break;
						  case 'Meta Actions':
							  return '#00FFFF';//cyan
							  break;
						  default:
							  return '#0950D0';//generic blue
							  break;
						}
					}
					</script>
					
					
						<!--<div class="12u">

							<!-- Blog --*>
								<section>
									<header class="major">
										<h2>The Blog</h2>
									</header>
									<div class="row">
										<div class="12u">
											<section class="box">
												<a href="#" class="image featured"><img src="images/pic08.jpg" alt="" /></a>
												<header>
													<h3>Magna tempus consequat lorem</h3>
													<p>Posted 45 minutes ago</p>
												</header>
												<p>Lorem ipsum dolor sit amet sit veroeros sed et blandit consequat sed veroeros lorem et blandit  adipiscing feugiat phasellus tempus hendrerit, tortor vitae mattis tempor, sapien sem feugiat sapien, id suscipit magna felis nec elit. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos lorem ipsum dolor sit amet.</p>
												<footer>
													<ul class="actions">
														<li><a href="#" class="button icon fa-file-text">Continue Reading</a></li>
														<li><a href="#" class="button alt icon fa-comment">33 comments</a></li>
													</ul>
												</footer>
											</section>
										</div>
										
									</div>
								</section>
							
						</div>-->
					</div>
				</div>
			</div>

		<!-- Footer -->
			<div id="footer-wrapper">
				<section id="footer" class="container">
					<!--<div class="row">
						<div class="8u">
							<section>
								<header>
									<h2>Blandit nisl adipiscing</h2>
								</header>
								<ul class="dates">
									<li>
										<span class="date">Jan <strong>27</strong></span>
										<h3><a href="#">Lorem dolor sit amet veroeros</a></h3>
										<p>Ipsum dolor sit amet veroeros consequat blandit ipsum phasellus lorem consequat etiam.</p>
									</li>
									<li>
										<span class="date">Jan <strong>23</strong></span>
										<h3><a href="#">Ipsum sed blandit nisl consequat</a></h3>
										<p>Blandit phasellus lorem ipsum dolor tempor sapien tortor hendrerit adipiscing feugiat lorem.</p>
									</li>
									<li>
										<span class="date">Jan <strong>15</strong></span>
										<h3><a href="#">Magna tempus lorem feugiat</a></h3>
										<p>Dolore consequat sed phasellus lorem sed etiam nullam dolor etiam sed amet sit consequat.</p>
									</li>
									<li>
										<span class="date">Jan <strong>12</strong></span>
										<h3><a href="#">Dolore tempus ipsum feugiat nulla</a></h3>
										<p>Feugiat lorem dolor sed nullam tempus lorem ipsum dolor sit amet nullam consequat.</p>
									</li>
									<li>
										<span class="date">Jan <strong>10</strong></span>
										<h3><a href="#">Blandit tempus aliquam?</a></h3>
										<p>Feugiat sed tempus blandit tempus adipiscing nisl lorem ipsum dolor sit amet dolore.</p>
									</li>
								</ul>
							</section>
						</div>
						<div class="4u">
							<section>
								<header>
									<h2>What's this all about?</h2>
								</header>
								<a href="#" class="image featured"><img src="images/pic10.jpg" alt="" /></a>
								<p>
									This is <strong>Dopetrope</strong> a free, fully responsive HTML5 site template by 
									<a href="http://n33.co">AJ</a> for <a href="http://html5up.net/">HTML5 UP</a> It's released for free under
									the <a href="http://html5up.net/license/">Creative Commons Attribution</a> license so feel free to use it for any personal or commercial project &ndash; just don't forget to credit us!
								</p>
								<footer>
									<a href="#" class="button">Find out more</a>
								</footer>
							</section>
						</div>
					</div>-->
					 
					<div class="row">
						<div class="12u">
						
							<!-- Copyright -->
								<div id="copyright">
									<ul class="links">
										<li>&copy; Untitled. All rights reserved.</li><li>Designed and Developed by: <a href="http://shubhamgoel.me">Shubham Goel</a></li>
									</ul>
								</div>

						</div>
					</div>
				</section>
			</div>

	</body>
</html>